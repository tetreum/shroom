(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{62:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return s}));var o=n(2),a=n(6),r=(n(0),n(74)),i={id:"avatar-movement",title:"Avatar/Furniture movement animation"},l={unversionedId:"guides/avatar-movement",id:"guides/avatar-movement",isDocsHomePage:!1,title:"Avatar/Furniture movement animation",description:"Moving Avatars",source:"@site/docs/guides/avatar-movement.md",slug:"/guides/avatar-movement",permalink:"/shroom/docs/guides/avatar-movement",editUrl:"https://github.com/tetreum/shroom/edit/master/docs/docs/guides/avatar-movement.md",version:"current",sidebar:"someSidebar",previous:{title:"Adding windows & landscapes",permalink:"/shroom/docs/guides/adding-windows"},next:{title:"Avatar actions",permalink:"/shroom/docs/guides/avatar-actions"}},c=[{value:"Moving Avatars",id:"moving-avatars",children:[]},{value:"Animation Queueing",id:"animation-queueing",children:[]},{value:"Moving furniture",id:"moving-furniture",children:[]}],m={rightToc:c};function s(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(r.b)("wrapper",Object(o.a)({},m,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"moving-avatars"},"Moving Avatars"),Object(r.b)("p",null,"To make an avatar move in a room, there are the following methods."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"avatar.walk(roomX, roomY, roomZ, { direction: 2 })")," to make the avatar walk with the walking animation to the specified position."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"avatar.move(roomX, roomY, roomZ)")," to make the avatar just slide to the specified position.")),Object(r.b)("p",null,"Walk usually should be used for user initiated navigation, while move should be used when external forces are acting on the user (i.e. roller or wired). But do whatever you like."),Object(r.b)("p",null,"Please note with both those methods, you will need to implement your own pathfinding solution. Both of these methods just handle animating the positional change of the avatar."),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-ts"}),'import * as PIXI from "pixi.js";\n\nimport { Room, Avatar, Shroom } from "@tetreum/shroom";\n\nconst view = document.querySelector("#root") as HTMLCanvasElement;\nconst application = new PIXI.Application({ view });\n\nconst shroom = Shroom.create({ application, resourcePath: "./resources" });\nconst room = Room.create(shroom, {\n  tilemap: `\n    xxxxx\n    x0000\n    x0000\n    x0000\n   `,\n});\n\nconst avatar = new Avatar({\n  look: "hd-180-1.hr-100-61.ch-210-66.lg-280-110.sh-305-62",\n  direction: 2,\n  roomX: 0,\n  roomY: 1,\n  roomZ: 0,\n});\n\nroom.x = 100;\nroom.y = 200;\nroom.onTileClick = (position) => {\n  console.log("Send this probably to a server somewhere", position);\n};\n\nsetTimeout(() => {\n  // Small delay here so we can witness the avatar moving.\n\n  avatar.walk(0, 2, 0, { direction: 4 });\n  avatar.move(1, 2, 0);\n}, 3000);\n\nroom.addRoomObject(avatar);\n\napplication.stage.addChild(room);\n')),Object(r.b)("h2",{id:"animation-queueing"},"Animation Queueing"),Object(r.b)("p",null,"Movement animations get queued and executed in order. In the above example, this means that ",Object(r.b)("inlineCode",{parentName:"p"},"walk")," executes first, and after the walk animation is done ",Object(r.b)("inlineCode",{parentName:"p"},"move")," will be executed instantly after."),Object(r.b)("p",null,"This behavior is there to make it easy to create smooth walking/movement across multiple tiles."),Object(r.b)("p",null,"To remove movement commands in that queue, there is a method on movable objects called ",Object(r.b)("inlineCode",{parentName:"p"},"clearMovement()"),"."),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-ts"}),"avatar.clearMovement();\n")),Object(r.b)("p",null,"This removes all queued animations and let's the present animation finish."),Object(r.b)("h2",{id:"moving-furniture"},"Moving furniture"),Object(r.b)("p",null,"Moving furniture is almost the same as with the avatar. Note here, that only ",Object(r.b)("inlineCode",{parentName:"p"},"FloorFurniture")," is able to animate.\nThe only difference to the ",Object(r.b)("inlineCode",{parentName:"p"},"Avatar")," is, that furniture can't walk (please let me know if they can)."),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-ts"}),'const furniture = new FloorFurniture({\n  roomX: 0,\n  roomY: 0,\n  roomZ: 0,\n  direction: 2,\n  type: "club_sofa",\n  animation: "0",\n});\n\nfurniture.move(0, 1, 0);\n')))}s.isMDXComponent=!0},74:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return b}));var o=n(0),a=n.n(o);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var m=a.a.createContext({}),s=function(e){var t=a.a.useContext(m),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=s(e.components);return a.a.createElement(m.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,i=e.parentName,m=c(e,["components","mdxType","originalType","parentName"]),u=s(n),d=o,b=u["".concat(i,".").concat(d)]||u[d]||p[d]||r;return n?a.a.createElement(b,l(l({ref:t},m),{},{components:n})):a.a.createElement(b,l({ref:t},m))}));function b(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var m=2;m<r;m++)i[m]=n[m];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);